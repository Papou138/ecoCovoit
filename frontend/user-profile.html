<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mon profil â€“ ecoCovoit</title>
    <link rel="stylesheet" href="assets/css/style.css" />
  </head>
  <body>
    <header>
      <h1>Bienvenue sur votre espace utilisateur</h1>
    </header>

    <main>
      <section class="profile-section">
        <div class="container">
          <h2>Mon Profil</h2>
          <div id="user-info" class="form-card">
            <p>Chargement en cours...</p>
          </div>
          <button id="logout-btn" class="search-button">Se dÃ©connecter</button>
        </div>
      </section>
    </main>

    <footer>
      <p>&copy; 2025 ecoCovoit â€“ Tous droits rÃ©servÃ©s</p>
    </footer>

    <script>
      // RÃ©cupÃ©rer les infos utilisateur via PHP
      fetch("../backend/auth/get-user.php")
        .then((res) => res.json())
        .then((data) => {
          const container = document.getElementById("user-info");

          if (!data.success) {
            container.innerHTML = `<p>${data.message}</p>`;
            return;
          }

          container.innerHTML = `
          <p><strong>Pseudo :</strong> ${data.user.pseudo}</p>
          <p><strong>Email :</strong> ${data.user.email}</p>
          <p><strong>RÃ´le :</strong> ${data.user.role}</p>
          <p><strong>CrÃ©dits :</strong> ${data.user.credit} ðŸ’°</p>
        `;
        });

      // DÃ©connexion (voir Ã©tape suivante pour logout.php)
      document.getElementById("logout-btn").addEventListener("click", () => {
        fetch("../backend/auth/logout.php").then(
          () => (window.location.href = "login.html")
        );
      });
    </script>
  </body>
</html>
