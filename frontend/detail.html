<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>D√©tail du covoiturage - ecoCovoit</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="assets/css/style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
  </head>
  <body>
    <header>
      <!-- Inclure ton header / menu ici (peut √™tre copi√© de index.html) -->
    </header>

    <main>
      <section class="trajet-detail">
        <div class="container">
          <h1>D√©tails du trajet</h1>

          <!-- Infos trajet -->
          <div class="trajet-info">
            <p><strong>D√©part :</strong> Paris</p>
            <p><strong>Arriv√©e :</strong> Lyon</p>
            <p><strong>Date :</strong> 20 juin 2025</p>
            <p><strong>Heure :</strong> 08h00 ‚Üí 12h30</p>
            <p><strong>Prix :</strong> 15 ‚Ç¨</p>
            <p><strong>Places disponibles :</strong> 2</p>
            <p><strong>√âcologique :</strong> ‚úÖ V√©hicule √©lectrique</p>
          </div>

          <!-- Infos chauffeur -->
          <div class="chauffeur-info">
            <h2>Chauffeur</h2>
            <img
              src="assets/img/photo-chauffeur.jpg"
              alt="Photo du chauffeur"
              width="80"
            />
            <p><strong>Nom :</strong> Alice Dupont</p>
            <p><strong>Note :</strong> ‚≠ê 4.7 / 5</p>
          </div>

          <!-- V√©hicule -->
          <div class="vehicule-info">
            <h2>V√©hicule</h2>
            <p><strong>Marque :</strong> Renault</p>
            <p><strong>Mod√®le :</strong> Zo√©</p>
            <p><strong>√ânergie :</strong> √âlectrique</p>
            <p><strong>Immatriculation :</strong> AB-123-CD</p>
          </div>

          <!-- Pr√©f√©rences conducteur -->
          <div class="preferences">
            <h2>Pr√©f√©rences du chauffeur</h2>
            <ul>
              <li>‚úÖ Non-fumeur</li>
              <li>‚úÖ Animaux accept√©s</li>
              <li>‚úÖ Musique autoris√©e</li>
              <li>üìù Autres : "Pause caf√© bienvenue ‚òï"</li>
            </ul>
          </div>

          <!-- Avis -->
          <div class="avis-section">
            <h2>Avis des passagers</h2>
            <div class="avis">
              <p>
                <strong>Marc :</strong> Super trajet ! Tr√®s ponctuel. ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
              </p>
              <p><strong>Claire :</strong> Chauffeur agr√©able. ‚≠ê‚≠ê‚≠ê‚≠ê</p>
            </div>
          </div>

          <!-- Bouton de participation -->
          <div class="actions">
            <button
              id="btn-participer"
              class="search-button"
              date-trajet-id="12"
            >
              Participer √† ce covoiturage
            </button>

            <div id="participation-message" class="message-box"></div>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <!-- Footer copi√© depuis index.html -->
    </footer>
    <script>
      document
        .getElementById("btn-participer")
        .addEventListener("click", () => {
          const trajetId =
            document.getElementById("btn-participer").dataset.trajetId;

          if (
            !confirm(
              "Confirmez-vous vouloir participer √† ce trajet ? Cela co√ªtera 2 cr√©dits."
            )
          ) {
            return;
          }

          fetch("../backend/reservations/participer.php", {
            method: "POST",
            headers: {
              "Content-Type": "application/x-www-form-urlencoded",
            },
            body: "trajet_id=" + encodeURIComponent(trajetId),
          })
            .then((res) => res.json())
            .then((data) => {
              const msg = document.getElementById("participation-message");
              msg.textContent = data.message;
              msg.style.color = data.success ? "green" : "red";
            });
        });
    </script>
  </body>
</html>
